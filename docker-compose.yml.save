version: '3.8'

services:
  os-node:
    build: .
    image: so-descentralizado:latest
    container_name: so-node
    # MODO HOST: Crucial para que el contenedor vea la red Ad hoc real de AWS
    network_mode: "host"
    environment:
      - NODE_IP=${}
    volumes:
      - ./logs:/opt/os-decentralized/logs
    restart: unless-stoppedversion: '3.8'

services:
  os-node:
    build: .
    image: so-descentralizado:latest
    container_name: so-node
    network_mode: "host"  # CRUCIAL para redes Ad hoc: usa la IP real del host
    environment:
      - NODE_ID=${NODE_ID}
      - NODE_IP=${NODE_IP}
    volumes:
      - ./logs:/opt/os-decentralized/logs  # Persistencia de logs
    restart: unless-stopped
